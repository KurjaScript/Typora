## 宏观视角下的浏览器

### 1. 浏览器简介

...总之，Chrome 浏览器就是好。

随着云计算的普及和 HTML5 技术的快速发展，越来越多的应用从 `C/S` 架构转化到 `B/S` 架构。这种改变让浏览器的重要性与日俱增。视频、音频、游戏几大核心场景也都在往 Web 的使用场景切换。

```
C/S client --server // 客户端到服务器：王者荣耀游戏

B/S browser --server // 浏览器到服务器 哔哩哔哩
```

### 2. 进程和线程

**进程：**在内存中正在运行的应用程序。

```
1. 在内存中独占一个内存空间
2. 进程和进程之间相互隔离
```

**线程：**就是进程中最小执行单位。

```
1. 一个进程是由多个线程组成
2. 每个线程之间也是相互隔离的
```

打开一个浏览器页面，启动了多少进程：至少四个——浏览器进程、GPU 进程、网络进程、渲染进程。

![](/Users/Kurja/Desktop/Typora/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/e6c9d24egy1h66e4bfvefj20yc0u0799.jpg)

- **浏览器进程：**主要负责界面显示、用户交互、子进程管理、同时提供存储等功能。
- **渲染进程：**核心任务是将 HTML、CSS 和 JavaScript 转换为用户可以与之交互的网页，排版引擎 Blink 和 JavaScript 引擎 V8 都运行在该进程中，默认情况下，Chrome 为每一个 Tab 标签页创建一个渲染进程，出于安全考虑，渲染进程都是运行在沙箱模式下的。
- **GPU 进程：**GPU 图像处理器（Graphics Processing Unit）的使用初衷是为了实现 3D CSS 的效果，只是随后网页、Chrome 的 UI 界面都会选择采用 GPU 来绘制，这使得 GPU 成为浏览器的普遍需求。最后，Chrome 在其多进程架构中也引入了 GPU 进程。
- **网络进程：**主要负责页面的网络资源加载，之前是作为一个模块运行在浏览器进程里面的，直至最近才独立处理，成为单独一个进程。
- **插件进程：**主要负责插件的运行，因为插件易崩溃，所以通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响。

<img src="/Users/Kurja/Desktop/Typora/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/e6c9d24egy1h66enxoju1j20h10580ss.jpg" style="zoom:200%;" />

### 3. 计算机网络的七层模型

#### 3.1 物理层

使用一定的物理介质（光纤、网线、wifi），传输的数据用 `0` 、`1`电信号表达。

#### 3.2 数据链路层

物理地址（MAC 地址）在数据链路层，数据链路层会把 `0`、`1` 数据封装为 byte 数据

<img src="/Users/Kurja/Desktop/Typora/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/%E7%AC%AC%E4%BA%8C%E6%AC%A1%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0/image-20220914204317077.png" alt="image-20220914204317077" style="zoom:50%;" />

> MAC 地址又叫**物理地址**是固化在网卡的ROM里面的，是厂商在生产网卡的时候就写入进去的，一共6字节。
>
> 网络通信都需要获取到网卡的MAC地址的，如果通信的一方只知道对方的IP地址，此时就会发送一个ARP广播通过目标IP获取到目标MAC地址然后完成通信。

> IP 地址又叫**互联网协议地址**，互联网上每一个主机都会有的 IP 地址。

#### 3.3 网络层

网络层有一个比较重要的 IP 协议，IP 协议用来确定数据传输的规则。

#### 3.4 传输层

UDP（用户数据包协议）与 TCP （传输控制协议）

> UDP 协议只管发，不管收。DNS 解析使用了 UDP 协议，微信电话、流媒体也使用了 UDP协议

> TCP 协议，
>
> 重传机制，
>
> 排序机制（根据数据包的编号对数据进行排序，重组数据包，保证数据包的完整和准确）

#### 3.5 会话层

断点续传，没有协议（不重要）

#### 3.6 表示层

翻译作用，解决不同系统之间数据传输的问题

#### 3.7 应用层

HTTP协议

也有人把七层网络模型划分为四层的：

> 物理层：物理层、数据链路层
>
> 网络层
>
> 传输层
>
> 绘画层、表示层、应用层