### 1. http 和https 的基本概念

**http**：是一个客户端和 服务器端**请求和应答的标准**(**TCP**)，用于从 WWW 服务器传输超文本到本地浏览器的**超文本传输协议**。

**https**：是以安全为目标的 HTTP 通道，即 **HTTP 下 加入 SSL 层进行加密**。其作用是：建立一个信息安全通道，来确保数据的传输，确保网站的真实性。

### 2. http 和 https 的区别及优缺点？

1. **http** 是**超文本传输协议**，信息是明文传输；**https** 协议要比 **http** 协议安全，**https** 是具有安全性的 **ssl加密传输协议**，可防止数据在传输过程中被窃取、改变，确保数据的完整性。
2. **http** 的默认端口是 80，**https** 的默认端口为 443。
3. **http** 的连接很简单，是无状态的。**https** 的握手阶段比较费时，会使页面加载时间延长 50%，增加 10%~20% 的耗电。
4. **https** 的缓存不如 **http** 高效，会增加数据开销。
5. **https** 协议需要 ca 证书，费用较高，功能越强大，证书费用越高。SSL 证书需要绑定 IP，不能在同一个 IP 上绑定多个域名，IPV4 资源支持不了这种消耗。

### 3. https 协议的工作原理？

客户端在使用 **https协议** 与 web服务器 通信时有以下几个步骤：

1. 客户端使用 `https url` 访问服务器，要求客户端与服务器**建立 ssl连接**。
2. web服务器 接收到客户端的请求后，会**将包含了公钥的网站证书传输给客户端**。
3. 客户端和 web服务器开始**协商ssl连接的安全等级**。
4. 客户端和浏览器协商为一致的安全等级后，建立会话密钥，然后通过网站的公钥来加密会话密钥，并传送给网站。
5. web服务器 通过自己的私钥解密出会话密钥；然后通过会话密钥加密与客户端之间的通信。

### 4. TCP 三次握手？

1. 第一次握手：客户端向服务器发送 **syn包**(`syn=j`)，进入`SYN_SENT`状态，等待服务器确认；**SYN：同步序列编号**（Synchronize Sequence Numbers）。
2. 第二次握手：服务器收到 syn包并确认客户端的syn(`ack=j+1`)，同时也发送一个自己的 **syn包**（**syn=k**），即 **SYN+ACK包**，此时服务器进入 `SYN_RECV` 状态。
3. 第三次握手：客户端收到服务器的 **SYN+ACK 包**，向服务器发送确认包(`ack=k+1`)，此包发送完毕，客户端和服务器进入 `ESTABLISHED` (**TCP 连接成功**)。

### 5. TCP 四次挥手？

1. 客户端向服务器发送连接释放报文，并停止发送数据。释放报文首部，FIN=1，其序列号为seq=u。此时客户端进入 `FIN-WAIT-1` (**终止等待1**)状态。
2. 服务器收到连接释放报文，发出确认报文，`ACK=1`，`ack=u+1`，并带上自己的序列号 `seq=v`，此时服务器进入 `CLOSE-WAIT`（**关闭等待**）状态。
3. 客户端收到服务器的确认请求后，客户端进入 `FIN-WAIT-2` (**终止等待2**)状态。
4. 服务器将最后的数据发送完毕后，就向客户端发送连接释放报文，`FIN=1`，`ack=u+1`，由于在半关闭状态，服务器很可能又发送了一些数据，假定此时的序列号为 `seq=w` ，此时服务器进入 `LAST-ACK`（**最后确认**）状态，等待客户端确认。
5. 客户端收到服务器的连接释放报文后，必须发出确认，`ACK=1`，`ack=w+1`，而自己的序列号是 `seq=u+1`，此时，客户端就进入了`TIME-WAIT`（**时间等待**）状态。注意此时TCP连接还没有释放，必须经过2∗∗MSL（**最长报文段寿命**）的时间后，当客户端撤销相应的 `TCB` 后，才进入 `CLOSED` 状态。
6. 服务器只要收到了客户端发出的确认，立即进入 `CLOSED` 状态。同样，撤销 `TCB` 后，就结束了这次的 `TCP` 连接。可以看到，服务器结束 `TCP` 连接的时间要比客户端早一些。