### 宏任务与微任务的区别

**在当前的微任务没有执行完成时，是不会执行下一个宏任务的。**

上代码：

```js
setTimeout( _ => {
    console.log(4)
})
new Promise( resolve => {
    resolve()
    console.log(1)
}).then(_ => {
    console.log(3)
})
console.log(2)
// 1
// 2
// 3
// 4
```

`setTimeout` 就是作为宏任务存在的，而 `Promise.then` 则是具有代表性的**微任务**，上述代码的执行顺序就是按照序号来输出。

**所有会进入的异步都是指向事件回调中的那部分代码**。

#### 宏任务

|            #            | 浏览器 | Node |
| :---------------------: | :----: | :--: |
|          `I/O`          |   o    |  o   |
|      `setTimeout`       |   o    |  o   |
|      `setInterval`      |   o    |  o   |
|     `setImmediate`      |   x    |  o   |
| `requestAnimationFrame` |   o    |  x   |

#### 微任务

|              #               | 浏览器 | Node |
| :--------------------------: | :----: | :--: |
|      `process.nextTick`      |   x    |  o   |
|      `MutationObserver`      |   o    |  x   |
| `Promise.then catch finally` |   o    |  o   |

